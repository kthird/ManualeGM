<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>La Tastiera</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body background="images/back.gif">
<!--START-->

<h3>La tastiera</h3>

Per l'interazione con la tastiera, esistono le seguenti variabili e funzioni:

<p>
<blockquote>
  <tt><b>keyboard_lastkey</b></tt> 
    Il codice dell'ultimo tasto premuto. Le costanti da usare come
        codici sono in basso. Puoi cambiarla, ad esempio impostandola a 0
        se hai usato la tastiera.<br>
  <tt><b>keyboard_key</b></tt> 
    Codice del tasto attualmente premuto (vedi sotto; 0 se nessuno).<br>
  <tt><b>keyboard_lastchar</b></tt> 
    Ultimo carattere premuto (come stringa).<br>
  <tt><b>keyboard_string</b></tt> 
    Una stringa che contiene gli ultimi 1024 caratteri digitati. Questa stringa
        contiene solo i caratteri stampabili. Risponde anche alla pressione
        di Backspace cancellando l'ultimo carattere. (Per azzerarla, assegnale
        la stringa vuota. Si cancella automaticamente in alcuni casi, come quando
        appare uno show_message() o passi a un'altra applicazione.)<br>
</blockquote>

<p>

A volte tona utile abbinare un tasto a un altro. Per esempio vorrai permettere
al giocatore di usare sia le frecce che il tastierino numerico. Anzich&eacute;
copiare le azioni puoi abbinare i tasti del tastierino numerico ai tasti
freccia. Vorrai anche implementare un meccanismo che permetta al giocatore di
sceglieere i tasti da usare. Perci&ograve; esistono le seguenti funzioni:

<p>
<blockquote>
  <tt><b>keyboard_set_map(key1,key2)</b></tt> 
    Abbina il tasto con codice key1 a key2.<br>
  <tt><b>keyboard_get_map(key)</b></tt> 
        Restituisce l'abbinamento corrente per il tasto.<br>
  <tt><b>keyboard_unset_map()</b></tt> 
        Reimposta tutti i tasti, abbinanboli a s&eacute; stessi.<br>
</blockquote>

<p>

Per controllare se un tasto particolare della tastiera o del mouse &egrave; premuto, puoi usare
le seguenti funzioni. Torna particolarmente utile se pi&ugrave; tasti devono essere premuti simultaneamente.

<p>
<blockquote>
  <tt><b>keyboard_check(key)</b></tt>
    Restituisce se il tasto col codice dato &egrave; premuto al momento.<br>
  <tt><b>keyboard_check_pressed(key)</b></tt>
    Restituisce se il tasto col codice dato &egrave; stato premuto dall'ultimo step.<br>
  <tt><b>keyboard_check_released(key)</b></tt>
    Restituisce se il tasto col codice dato &egrave; stato rilasciato dall'ultimo step.<br>
  <tt><b>keyboard_check_direct(key)</b></tt> 
    Restituisce se il tasto col codice particolare &egrave; premuto
        controllando direttamente l'hardware. Il risultato non dipende
        da quale applicazione &egrave; in uso. Ci&ograve; permette qualche controllo
        in pi&ugrave;. In particolare, puoi usare i codici vk_lshift, vk_lcontrol,
        vk_lalt, vk_rshift, vk_rcontrol e vk_ralt per controllare se
        &egrave; premuto lo shift, il control o l'alt di sinistra o di destra.<br>
</blockquote>

<p>

Le seguenti funzioni possono essere usate per manipolare lo stato della tastiera:

<p>
<blockquote>
  <tt><b>keyboard_get_numlock()</b></tt> 
    Restituisce se Blocca Numeri &egrave; attivato.<br>
  <tt><b>keyboard_set_numlock(on)</b></tt> 
    Attiva (true) o disattiva (false) Blocca Numeri.<br>
  <tt><b>keyboard_key_press(key)</b></tt> 
    Simula la pressione del tasto col codice dato.<br>
  <tt><b>keyboard_key_release(key)</b></tt> 
    Simula il rilascio del tasto col codice dato.<br>
</blockquote>

<p>

Esistono le seguenti costanti da usare come codici:

<p>
<blockquote>
  <tt><b>vk_nokey</b></tt> significa che nessun tasto &egrave; premuto<br>
  <tt><b>vk_anykey</b></tt> significa che &egrave; premuto un tasto qualsiasi<br>
  <tt><b>vk_left</b></tt> codice per la freccia sinistra<br>
  <tt><b>vk_right</b></tt> codice per la freccia destra<br>
  <tt><b>vk_up</b></tt> codice per la freccia su<br>
  <tt><b>vk_down</b></tt> codice per la freccia gi&ugrave;<br>
  <tt><b>vk_enter</b></tt> tasto Invio<br>
  <tt><b>vk_escape</b></tt> tasto Esc<br>
  <tt><b>vk_space</b></tt> tasto Spazio<br>
  <tt><b>vk_shift</b></tt> tasto Shift (conosciuto anche come Maiusc)<br>
  <tt><b>vk_control</b></tt> tasto Control (Ctrl)<br>
  <tt><b>vk_alt</b></tt> tasto Alt<br>
  <tt><b>vk_backspace</b></tt> tasto Backspace<br>
  <tt><b>vk_tab</b></tt> tasto Tab<br>
  <tt><b>vk_home</b></tt> tasto Home (quello a forma di freccia in diagonale)<br>
  <tt><b>vk_end</b></tt> tasto Fine<br>
  <tt><b>vk_delete</b></tt> tasto Canc<br>
  <tt><b>vk_insert</b></tt> tasto Inserisci (Ins)<br>
  <tt><b>vk_pageup</b></tt> tasto Pagina Su<br>
  <tt><b>vk_pagedown</b></tt> tasto Pagina Gi&ugrave;<br>
  <tt><b>vk_pause</b></tt> tasto Pausa/Interr (pause/break in inglese)<br>
  <tt><b>vk_printscreen</b></tt> tasto Stamp/R Sist (printscreen/sysrq in inglese)<br>
  <tt><b>vk_f1 ... vk_f12</b></tt> codici per i tasti funzione (F1, F2, ..., F12)<br>
  <tt><b>vk_numpad0 ... vk_numpad9</b></tt> cifre del tastierino numerico<br>
  <tt><b>vk_multiply</b></tt> tasto moltiplica (*) sul tastierino numerico<br>
  <tt><b>vk_divide</b></tt> tasto dividi (/) sul tastierino numerico<br>
  <tt><b>vk_add</b></tt> tasto agguingi (+) sul tastierino numerico<br>
  <tt><b>vk_subtract</b></tt> tasto sottrai (-) sul tastierino numerico<br>
  <tt><b>vk_decimal</b></tt> tasto punto decimale (.) sul tastierino numerico<br>
</blockquote>

<p>

Per le lettere usa per esempio <tt>ord('A')</tt>. (Usa la lettera maiuscola.)
Per le cifre normali usa per esempio  <tt>ord('5')</tt> per ottenere il &lt;5&gt;.
Le seguenti costanti possono essere usate solo in <tt>keyboard_check_direct</tt>:

<p>
<blockquote>
  <tt><b>vk_lshift</b></tt> Shift sinistro<br>
  <tt><b>vk_lcontrol</b></tt> Control sinistro<br>
  <tt><b>vk_lalt</b></tt> Alt sinistro<br>
  <tt><b>vk_rshift</b></tt> Shift destro<br>
  <tt><b>vk_rcontrol</b></tt> Control destro<br>
  <tt><b>vk_ralt</b></tt> Alt destro<br>
</blockquote>

<p>

Per esempio, mettiamo che hai un object che l'utente pu&ograve; controllare con le
frecce, puoi mettere il seguente codice nello Step Event dell'object:

<p>
<blockquote>
<pre>
{
  <b>if</b> (keyboard_check(vk_left))  x -= 4;
  <b>if</b> (keyboard_check(vk_right)) x += 4;
  <b>if</b> (keyboard_check(vk_up))    y -= 4;
  <b>if</b> (keyboard_check(vk_down))  y += 4;
}
</pre>
</blockquote>

<p>

Ovviamente &egrave; molto pi&ugrave; semplice mettere i codici nei Keyboard Event.

<p>
Ci sono delle funzioni addizionali relative alla tastiera.

<p>
<blockquote>
  <tt><b>keyboard_clear(key)</b></tt> 
    Azzera lo stato del tasto. Significa che non generer&agrave; pi&ugrave;
        i Keyboard Event finch&eacute; la pressione del tasto non viene ripetuta.<br>
  <tt><b>io_clear()</b></tt> 
    Cancella tutt gli stati della tastiera e del mouse.<br>
  <tt><b>io_handle()</b></tt> 
    Aggiorna gli stati della tastiera e del mouse.<br>
  <tt><b>keyboard_wait()</b></tt> 
    Blocca il gioco finch&eacute; non viene premuto un tasto sulla tastiera.<br>
</blockquote>

<p>


<!--END-->
</body>
</html>

<!-- KEYWORDS
keyboard status
keycodes
numlock
key mapping

stato della tastiera
codici dei tasti
Blocca Numeri
abbinamento dei tasti

keyboard_key
keyboard_lastkey
keyboard_lastchar
keyboard_string
keyboard_set_map()
keyboard_get_map()
keyboard_unset_map()
keyboard_check()
keyboard_check_pressed()
keyboard_check_released()
keyboard_check_direct()
keyboard_get_numlock()
keyboard_set_numlock()
keyboard_key_press()
keyboard_key_release()
vk_nokey
vk_anykey
vk_enter
vk_return
vk_shift
vk_control
vk_alt
vk_escape
vk_space
vk_backspace
vk_tab
vk_pause
vk_printscreen
vk_left
vk_right
vk_up
vk_down
vk_home
vk_end
vk_delete
vk_insert
vk_pageup
vk_pagedown
vk_f1
vk_f2
vk_f3
vk_f4
vk_f5
vk_f6
vk_f7
vk_f8
vk_f9
vk_f10
vk_f11
vk_f12
vk_numpad0
vk_numpad1
vk_numpad2
vk_numpad3
vk_numpad4
vk_numpad5
vk_numpad6
vk_numpad7
vk_numpad8
vk_numpad9
vk_divide
vk_multiply
vk_subtract
vk_add
vk_decimal
vk_lshift
vk_lcontrol
vk_lalt
vk_rshift
vk_rcontrol
vk_ralt
keyboard_clear()
io_clear()
io_handle()
keyboard_wait()

--> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>File</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body background="images/back.gif">
<!--START-->

<h3>File</h3>

&Egrave; utile utilizzare file esterni nei giochi. Ad esempio, &egrave; 
possibile creare un file che descrive in quali momenti 
certe cose devono accadere. Potrebbe essere utile, inoltre, 
salvare nei file alcune informazioni utili per la prossima esecuzione del 
gioco (ad esempio, il livello corrente). Sono disponibili le seguenti funzioni 
per leggere o scrivere dati in file di testo:

<p>
<blockquote>
  <tt><b>file_text_open_read(fname)</b></tt> 
    Apre il file con il nome indicato per leggerlo. La funzione restituisce l'id del file 
    che deve essere usato in altre funzioni. &Egrave; possibile aprire pi&ugrave; file 
    contemporaneamente (massimo 32). Non dimenticate di chiuderli una volta che si &egrave; finito con loro.<br>
  <tt><b>file_text_open_write(fname)</b></tt> 
    Apre il file indicato per la scrittura, creandolo se non esiste. 
    La funzione restituisce l'id del file che deve essere usato in altre funzioni.<br>
  <tt><b>file_text_open_append(fname)</b></tt>
    Apre il file indicato per l'aggiunta di dati alla fine, creandolo se non esiste. 
    La funzione restituisce l'id del file che deve essere usato in altre funzioni.<br>
  <tt><b>file_text_close(fileid)</b></tt> 
    Chiude il file con dato l’id del file.<br>
  <tt><b>file_text_write_string(fileid,str)</b></tt> 
    Scrive una stringa nel file dato l’id.<br>
  <tt><b>file_text_write_real(fileid,x)</b></tt> 
    Scrive un valore reale nel file dato l’id. 
    (Per separare la parte intera dalla parte decimale bisogna sempre usate il punto).<br>
  <tt><b>file_text_writeln(fileid)</b></tt> 
    Scrive una nuova riga nel file (va a capo).<br>
  <tt><b>file_text_read_string(fileid)</b></tt> 
    Legge una stringa dal file, dato il suo id, e restituisce questa stringa. 
    Una stringa termina alla fine della riga di appartenenza.<br>
  <tt><b>file_text_read_real(fileid)</b></tt> 
    Legge un valore reale dal file e restituisce il valore.<br>
  <tt><b>file_text_readln(fileid)</b></tt> 
    Salta il resto della riga nel file e comincia la lettura dall'inizio della riga successiva.<br>
  <tt><b>file_text_eof(fileid)</b></tt> 
    Restituisce un valore se si &egrave; raggiunta la fine del file.<br>
  <tt><b>file_text_eoln(fileid)</b></tt> 
    RRestituisce un valore se si &egrave; raggiunta la fine di una riga nel file.<br>
</blockquote>

<p>
Per manipolare i file &egrave; possibile utilizzare le seguenti funzioni:

<p>
<blockquote>
  <tt><b>file_exists(fname)</b></tt> 
   Indica se il file con il nome dato esiste (true) o meno (false).<br>
  <tt><b>file_delete(fname)</b></tt> 
    Elimina il file con il nome dato.<br>
  <tt><b>file_rename(oldname,newname)</b></tt> 
    Rinomina il file con nome oldname in newname.<br>
  <tt><b>file_copy(fname,newname)</b></tt> 
    Copia il file fname in un file newname.<br>
  <tt><b>directory_exists(dname)</b></tt> 
    Restituisce un valore se la directory indicata non esiste. 
    Il nome deve includere il percorso completo, non un percorso relativo.<br>
  <tt><b>directory_create(dname)</b></tt> 
    Crea una directory con il nome dato (incluso il suo percorso) se non esiste gi&agrave;. 
    Il nome deve includere il percorso completo, non un percorso relativo.<br>
  <tt><b>file_find_first(mask,attr)</b></tt> 
    Restituisce il nome del primo file che soddisfa la maschera (mask) e
    gli attributi (attr). Se tale file non esiste, viene restituita la stringa vuota. 
    La maschera pu&ograve; contenere un percorso e pu&ograve; contenere wildchars (caratteri jolly), per 
    esempio 'C:. \ Temp \ * doc'. Gli attributi specificano il tipo di file che si vuole cercare (cos&igrave; vengono 
    sempre restituiti i file che soddisfano il percorso). &Egrave; possibile aggiungere le 
    seguenti costanti per cercare il tipo di file che si desidera:<br>

      <blockquote>
	    <tt><b>fa_readonly</b> file di sola lettura</tt><br>
	    <tt><b>fa_hidden</b> file nascosti</tt><br>
	    <tt><b>fa_sysfile</b> file di sistema</tt><br>
	    <tt><b>fa_volumeid</b> volume-id files</tt><br>
	    <tt><b>fa_directory</b> cartelle</tt><br>
	    <tt><b>fa_archive</b> file compressi</tt><br>
      </blockquote>
  <tt><b>file_find_next()</b></tt> 
    Restituisce il nome del file successivo che soddisfa la maschera e gli attributi dati precedentemente. 
    Se tale file non esiste, viene restituita la stringa vuota.<br>
  <tt><b>file_find_close()</b></tt> 
    Deve essere chiamata dopo la gestione di tutti i file per liberare memoria.<br>
  <tt><b>file_attributes(fname,attr)</b></tt> 
    Restituisce un valore se il file ha tutte le caratteristiche indicate dall’attributo attr. 
    Usa una combinazione delle costanti indicate sopra.<br>
</blockquote>

<p>
Le seguenti funzioni possono essere utilizzate per modificare i nomi dei file. Si noti che queste
funzioni non agiscono su file effettivi ma solo su stringhe.

<p>
<blockquote>
  <tt><b>filename_name(fname)</b></tt> 
    Restituisce il nome del file indicato, con l'estensione, ma senza il percorso.<br>
  <tt><b>filename_path(fname)</b></tt> 
    Restituisce il  percorso del file indicato, compreso il backslash finale.<br>
  <tt><b>filename_dir(fname)</b></tt> 
    Restituisce la directory del file indicato, che normalmente 
    &egrave; uguale al percorso senza il backslash finale.<br>
  <tt><b>filename_drive(fname)</b></tt> 
    Restituisce le informazioni sul drive del file.<br>
  <tt><b>filename_ext(fname)</b></tt> 
   Restituisce l’estensione del file indicato, compreso il punto iniziale.<br>
  <tt><b>filename_change_ext(fname,newext)</b></tt> 
    Restituisce il nome del file indicato, con l'estensione (compreso il punto) 
    sostituita dalla nuova estensione (newext). Utilizzando una stringa vuota come newext 
    &egrave; possibile rimuovere l'estensione.<br>
</blockquote>

<p>
In rari casi pu&ograve; essere necessario leggere i dati da file binari. Le seguenti 
funzioni di basso livello sono disponibili per fare questo:

<p>
<blockquote>
  <tt><b>file_bin_open(fname,mod)</b></tt> 
    Apre il file con il nome indicato. La modalit&agrave; (mod) indica cosa si 
    pu&ograve; fare con il file: 0 = lettura, 1 = scrittura, 2 = lettura e scrittura). 
    Quando il file non esiste viene creato. La funzione restituisce l'id del file 
    che deve essere usato in altre funzioni. &Egrave; possibile aprire pi&ugrave; file 
    contemporaneamente (massimo 32). &Egrave; importante chiudere il file una finito con esso.<br>
  <tt><b>file_bin_rewrite(fileid)</b></tt> 
    Riscrive il file di cui &egrave; dato l’id, ovvero, cancella 
    il contenuto del file e comincia a scrivere dall’inizio.<br>
  <tt><b>file_bin_close(fileid)</b></tt> 
    Chiude il file con di cui &egrave; dato l’id.<br>
  <tt><b>file_bin_size(fileid)</b></tt> 
    Restituisce la dimensione (in byte) del file di cui &egrave; dato l’id.<br>
  <tt><b>file_bin_position(fileid)</b></tt> 
    Restituisce la posizione corrente (in byte; 0 &egrave; la prima posizione) 
    del file di cui &egrave; dato l’id.<br>
  <tt><b>file_bin_seek(fileid,pos)</b></tt> 
    Sposta la posizione corrente del file alla posizione indicata. Per accodare un file bisogna spostare la posizione 
    del file alla dimensione del file prima di poter cominciare a scrivere.<br>
  <tt><b>file_bin_write_byte(fileid,byte)</b></tt> 
    Scrive un byte di dati nel file di cui &egrave; dato l’id.<br>
  <tt><b>file_bin_read_byte(fileid)</b></tt> 
    Legge un byte di dati dal file e restituisce questo valore.<br>
</blockquote>

<p>
Se il giocatore ha selezionato la modalit&agrave; protetta nelle preferenze, per 
un certo numero di queste funzioni, non &egrave; consentito specificare un percorso, e 
solo i file nella cartella di gioco posso essere, ad esempio, scritti.

<p>
Se sono inclusi dei file nell'eseguibile del gioco e non vengono esportati automaticamente
all'inizio del gioco, &egrave; possibile utilizzare le seguenti funzioni per fare questo:

<p>
<blockquote>
  <tt><b>export_include_file(fname)</b></tt> 
    Esporta il file incluso nel gioco con nome fname. 
    Il nome &egrave; una variabile stringa, quindi sono necessarie le virgolette.<br>
  <tt><b>export_include_file_location(fname,location)</b></tt> 
    Esporta il file incluso nel gioco con nome fname alla posizione indicata. 
    La posizione (location) deve contenere il percorso e il nome del file.<br>
  <tt><b>discard_include_file(fname)</b></tt> 
    Elimina il file incluso con il nome fname, liberando la memoria utilizzata. 
    Il nome &egrave; una variabile stringa, quindi sono necessarie le virgolette.<br>
</blockquote>

<p>
Le seguenti quattro variabili di sola lettura possono essere utili:

<p>
<blockquote>
  <tt><b>game_id*</b></tt> 
    Unico numero che identifica il gioco. Si pu&ograve; usare questa viabile se si 
    necessita di un nome univoco per un file.<br>
  <tt><b>working_directory*</b></tt> 
    Directory di lavoro del gioco. (Non compresa il backslash finale).<br>
  <tt><b>program_directory*</b></tt> 
    Directory nella quale &egrave; presente il gioco eseguibile (escluso il backslash finale). 
    Quando si esegue un gioco standalone questa directory &egrave; normalmente la stessa directory 
    di lavoro, a meno che il gioco, ad esempio, apre un file utilizzando il selettore di file. 
    Si noti che quando si testa un gioco che si sta creando la working directory e 
    la program directory saranno diverse. In tal caso, la directory di lavoro &egrave; il luogo 
    in cui &egrave; memorizzato il file editabile del gioco, mentre la directory del programma &egrave; 
    una directory temporanea per il test.<br>
  <tt><b>temp_directory*</b></tt> 
    Directory temporanea creata per il gioco (escluso il backslash finale). 
    &Egrave; possibile memorizzare i file temporanei qui. Saranno rimossi al termine del gioco.
</blockquote>

<p>
In alcune situazioni si potrebbe desiderare di dare ai giocatori 
la possibilit&agrave; di fornire righe di comando al gioco in esecuzione 
(ad esempio per creare trucchi o speciali modalit&agrave;). Per fare questo si possono usare:

<p>
<blockquote>
  <tt><b>parameter_count()</b></tt> 
    Restituisce il numero di parametri della riga di comando. 
    I parametri attuali possono essere recuperati con la funzione che segue..<br>
  <tt><b>parameter_string(n)</b></tt> 
    Restituisce il parametro della riga di comando di indice n. 
    Il primo parametro ha indice 1. L'ultimo ha indice parameter_count (). 
    L’indice 0 &egrave; un indice speciale: &egrave; il nome del file eseguibile del gioco (incluso il percorso).<br>
</blockquote>

<p>
&Egrave; possibile leggere il valore delle variabili d'ambiente con la seguente funzione:

<p>
<blockquote>
  <tt><b>environment_get_variable(name)</b></tt> 
  Restituisce il valore (una stringa) della variabile d'ambiente con il nome dato.
</blockquote>

<p>
Infine, se siete interessati alla dimensione del disco e allo spazio libero, 
&egrave; possibile utilizzare le seguenti funzioni:
</p>

<p>
<blockquote>
  <tt><b>disk_size(drive)</b></tt> 
  Restituisce la dimensione del disco indicata in byte. “drive” deve essere una 
  lettera maiuscola, ad esempio 'C'. Se non si specifica l'unit&agrave;, verr&agrave; restituita 
  la dimensione dell'unit&agrave; in cui si trova la directory di lavoro.<br>
  <tt><b>disk_free(drive)</b></tt> 
  Restituisce la quantit&agrave; di spazio libero sul disco indicata in byte. 
  “drive” deve essere una lettera maiuscola, ad esempio 'C'. 
  Se non si specifica l'unit&agrave;, verr&agrave; restituita la quantit&agrave; di spazio 
  libero dell'unit&agrave; in cui si trova la directory di lavoro.<br>
</blockquote>


<!--END-->
</body>
</html>

<!-- KEYWORDS
files
folders
directories
game id
working directory
temporary directory
program directory
file I/O
handling files
saving information
reading from file
writing to file
text files
binary files
file attributes
file names
parameters
command line parameters
environment variables
exporting files

cartelle
directory di lavoro
directory temporanea
programma directory
gestione dei file
salvataggio delle informazioni
la lettura da file
la scrittura nel file
file di testo
file binari
attributi del file
nomi di file
parametri
parametri della riga di comando
variabili d'ambiente
l'esportazione di file

file_text_open_read()
file_text_open_write()
file_text_open_append()
file_text_close()
file_text_write_string()
file_text_write_real()
file_text_writeln()
file_text_read_string()
file_text_read_real()
file_text_readln()
file_text_eof()
file_text_eoln()
file_exists()
file_delete()
file_rename()
file_copy()
directory_exists()
directory_create()
file_find_first()
file_find_next()
file_find_close()
file_attributes()
filename_name()
filename_path()
filename_dir()
filename_drive()
filename_ext()
filename_change_ext()
file_bin_open()
file_bin_rewrite()
file_bin_close()
file_bin_position()
file_bin_size()
file_bin_seek()
file_bin_write_byte()
file_bin_read_byte()
export_include_file()
export_include_file_location()
discard_include_file()
parameter_count()
parameter_string()
environment_get_variable()
disk_size()
disk_free()
fa_readonly
fa_hidden
fa_sysfile
fa_volumeid
fa_directory
fa_archive
game_id
working_directory
temp_directory
program_directory
--> 

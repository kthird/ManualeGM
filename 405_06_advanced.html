<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
<title>Advanced Drawing Functions</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body background="images/back.gif">
<!--START-->

<H3>Funzioni di disegno avanzato</H3>

<i><b>Questa funzionalit&agrave; &egrave; disponibile solo nella versione Standard di GameMaker.</b></i>

<p>
Sopra, un numero di funzioni di disegno di base sono state descritte. Qui puoi trovare un numero di funzioni addizionali
che offrono molte altre possibilit&agrave;. Prima di tutto ci sono funzioni per disegnare forme
con colore a gradiente. Ci sono funzione per disegnare poligoni generali, e la possibilita di disegnare poligoni
con texture mappate.

<P>
Le seguenti funzioni sono delle estenzioni di quelle basilari. Ognuna di loro ha come parametro extra il colore
che &egrave; usato per determinare il colore dei differenti vertici. Il colore di disegno standard
non &egrave; usato in queste funzioni.

<p>
<blockquote>
  <tt><b>draw_point_color(x,y,col1)</b></tt>
    Disegna un punto con il colore indicato alle coordinate (x,y).<br>
  <tt><b>draw_line_color(x1,y1,x2,y2,col1,col2)</b></tt>
	  Disegna una linea da (x1,y1) a (x2,y2), interpolando il colore
	        da col1 a col2.<br>
  <tt><b>draw_line_width_color(x1,y1,x2,y2,w,col1,col2)</b></tt> 
    Disegna una linea da (x1,y1) a (x2,y2), con larghezza w interpolando il colore
	        da col1 a col2.<br>
  <tt><b>draw_rectangle_color(x1,y1,x2,y2,col1,col2,col3,col4,outline)</b></tt>
	  Disegna un rettangolo. I quatro colori
		Indicano i colori dei vertici rispettivamente in alto a sinistra, in alto a destra, in basso a destra e in basso a sinistra. outline
		indica se deve essere disegnato solo il perimetro (true) o se deve essere riempito (false).<br>
	<tt><b>draw_roundrect_color(x1,y1,x2,y2,col1,col2,outline)</b></tt>
	  disegna un rettangolo arrotondato. col1 &egrave; il colore al centro
		e col2 &egrave; il colore al margine. outline indica se deve essere disegnato solo il perimetro (true) 
		o se deve essere riempito (false).<br>
  <tt><b>draw_triangle_color(x1,y1,x2,y2,x3,y3,col1,col2,col3,outline)</b></tt>
	  Disegna un triangolo. I tre colori sono i colori
		dei tre vertici che saranno interpolati sul triangolo. outline indica se deve essere disegnato solo il perimetro (true) 
		o se deve essere riempito (false).<br>
  <tt><b>draw_circle_color(x,y,r,col1,col2,outline)</b></tt>
	  Disegna un cerchio alle cordinate (x,y) con raggio r. col1 &egrave; il colore al centro
		e col2 &egrave; il colore al margine. outline indica se deve essere disegnato solo il perimetro (true)
		o se deve essere riempito (false).<br>
  <tt><b>draw_ellipse_color(x1,y1,x2,y2,col1,col2,outline)</b></tt>
	  Disegna un ellisse. col1 &egrave; il colore al centro e
		col2 &egrave; il colore al margine. outline indica se deve essere disegnato solo il perimetro (true) 
		o se deve essere riempito (false).<br>
</blockquote>

<p>
Puoi anche disegnare delle primitive. Queste funzionano un po' diversamente. Si inizia specificando la
primitiva che vuoi disegnare. Poi si specificano i suoi vertici, e infine si finisce la primitiva,
al momento che viene disegnata. Ci sono 6 tipi di primitive:

<p>
<blockquote>
  <tt><b>pr_pointlist</b></tt>
	  I vertici sono un set di punti.<br>
  <tt><b>pr_linelist</b></tt>
	  I vertici sono un set di segmenti. Ogni paio di vertici forma un segmento. Cos&igrave; ci devono essere 
	        almeno un paio di vertici.<br>
  <tt><b>pr_linestrip</b></tt>
	  I vertici formano una polilinea con il primo conneso al secondo, il secondo al terzo, etc. L'ultimo non &egrave; connesso al primo. Si deve specificare 
	        un segmento extra per questo.<br>
  <tt><b>pr_trianglelist</b></tt>
	  I vertici sono un set di triangoli. Ogni trio di vertici forma un triangolo. Cos&igrave; il
		Numero di vertici deve eseere un multiplo di 3.<br>
  <tt><b>pr_trianglestrip</b></tt>
	  I vertici di nuovo formano triangoli ma stavolta &egrave; un po' differente.
		I primi 3 formano il primo triangolo. Gli ultimi due di questi, insieme al prossimo vertice,
		formano il secondo triangolo, etc. Cos&igrave; ogni nuovo vertice specifica un nuovo triangolo, connesso
		al precedente.<br>
  <tt><b>pr_trianglefan</b></tt>
	  Simile a una lista di triangoli ma questa volta il primo vertice &egrave; parte di tutti i triangoli.
	  	Ogni nuovo vertice specifica un nuovo triangolo, connesso al precedente e al primo..<br>
</blockquote>

<p>
Esistono le seguenti funzioni per disegnare i primitivi

<p>
<blockquote>
  <tt><b>draw_primitive_begin(kind)</b></tt>
	  Inizia la costruzione di una primitiva del tipo indicato.<br>
  <tt><b>draw_vertex(x,y)</b></tt>
	  Aggiunge un vertice (x,y) alla primitiva, usando il colore e la trasparenza settate precedentemente.<br>
  <tt><b>draw_vertex_color(x,y,col,alpha)</b></tt>
	  Aggiunge un vertice (x,y) alla primitiva, con il proprio colore e trasparenza.
	  	Questo permette di creare primitive con cambiamenti di colore e trasparenza..<br>
  <tt><b>draw_primitive_end()</b></tt>
	  Termina la costruzione della primitiva. Questa funzione attualmente la disegna.<br>
</blockquote>

<p>
Infine, &egrave; possibile disegnare le primitive usando sprite o background come texture. Quando si usa
una texture l'immagine &egrave; posizionate sulla primitiva, deformandola per coprire la primitiva. Le texture sono usate
per aggiungere dei dettagli alle primitive, es: un muro di mattoni. Per usare le texture si deve prima ottenere
l'id della texture che si vuole usare. Per questo esistono le seguenti funzioni:

<p>
<blockquote>
  <tt><b>sprite_get_texture(spr,subimg)</b></tt>
	  Ritorna l'id della texture corrispondente alla sottoimmagine dello sprite indicato.<br>
  <tt><b>background_get_texture(back)</b></tt>
	  Ritorna l'id della texture corispondente al background indicato.<br>
</blockquote>

<p>
La texture selezionata potrebbe non essere ancora in memoria video. Il sistema la mettera l&igrave; solo se ne hai il bisogno
ma avvolte questo si vuole decidere da s&eacute;. Per questo esistono le due seguenti funzioni:

<p>
<blockquote>
  <tt><b>texture_preload(texid)</b></tt>
	  Mette immediatamente in memoria video la texture.<br>
  <tt><b>texture_set_priority(texid,prio)</b></tt>
	  Quando c'&egrave; poca memoria video alcune texture sono rimosse temporaneamente per fare spazio ad altre
	  	Quelle con poca priorit&agrave; sono rimosse per prima. 
	  	Di default, hanno tutte priorit&agrave; 0. (usa un valore positivo!)
<br>
</blockquote>

<p>
Per assegnare texture alla primitiva si deve specificare quale parte della texture e dove deve essere posizionata 
sulla primitiva. Le posizioni sono indicate con valori tra 0 e 1 ma qui c'&egrave; un problema.
Le dimensioni delle texture devono essere potenze di 2 (es: 32x32 o 64x64 ecc). Se vuoi usare uno sprite o
un background come texture &egrave; meglio usare queste dimensioni. Se no, il resto sar&agrave; vuoto. Per
sapere quale parte della texture e attualmente in uso si possono usare le seguenti funzioni. Ritornano
una valore tra 0 e 1 che indica la larghezza o l'altezza della parte attuale della texture che sta per essere
utilizzata. Specificando questi valori come coordinate di texture indicher&agrave; rispettivamente la parte destra o
la parte bassa della texture.

<p>
<blockquote>
  <tt><b>texture_get_width(texid)</b></tt>
	  Ritorma la larghezza della texture con il dato id. La larghezza &egrave; compresa tra 0 e 1.<br>
  <tt><b>texture_get_height(texid)</b></tt>
	  Ritorma l'altezza della texture con il dato id. L'altezza &egrave; compresa tra 0 e 1.<br>
</blockquote>

<p>

Per disegnare primitive texturizzate si possono usare le seguenti funzioni:

<p>
<blockquote>
  <tt><b>draw_primitive_begin_texture(kind,texid)</b></tt>
	  Inizia la descrizione di una primitiva con il tipo indicato e la texture indicata.<br>
  <tt><b>draw_vertex_texture(x,y,xtex,ytex)</b></tt>
	  Aggiunge un vertice (x,y) alla primitiva con posizione (xtex,ytex) nella texture, 
	        miscelandola con il colore e la trasparenza settate prima. xtex e ytex
   		dovrebbe essere compresa tra 0 e 1 ma si possono usare anche valori pi&ugrave; grandi, che
   		portano ad una ripetizione della texture (vedi in basso).<br>
  <tt><b>draw_vertex_texture_color(x,y,xtex,ytex,col,alpha)</b></tt>
	  Aggiunge un vertice (x,y) alla primitiva con posizione (xtex,ytex) nella texture,
	  	miscelandola con il colore e la trasparenza data.<br>
  <tt><b>draw_primitive_end()</b></tt>
	  Termina la descrizione della primitiva, qursta funzione attualmente la disegna.<br>
</blockquote>

<p>
Ci sono tre funzione che influenzano come le texture sono disegnate:

<p>
<blockquote>
  <tt><b>texture_set_interpolation(linear)</b></tt>
	  Indica se usare l'interpolazzione lineare (true) o se prendere il pixel pi&ugrave; vicino (false).
		L'interpolazione lineare rende le texture morbide ma le pu&ograve; rendere anche sfocate e
		a volte costa tempo di elaborazione extra. Quest'impostazione influenza anche il disegno
		degli sprite e dei background.
		Di default &egrave; settato a false. (Pu&ograve; essere cambiato nel men&ugrave; "global game settings.".)<br>
  <tt><b>texture_set_blending(blend)</b></tt>
	  Indica se miscelare le texture con il colore e la trasparenza indicati i precedenza. 
	  	Settandola su false potrebbe essere pi&ugrave; veloc&egrave; su vecchi hardware.
	  	Quest'impostazione influenza anche il disegno degli sprite e dei background.
		Di default &egrave; settato a true.<br>
  <tt><b>texture_set_repeat(repeat)</b></tt>
	  Indica se ripetere le texture. Questo lavora come segue. Come indicato sopra le coordinate di texture
	  	usano valori compresi tra 0 e 1. Se si specifica un valore pi&ugrave; grande di 1, di default il resto non
	  	viene disegnato. Settandola a true la texture viene ripetuta. Si noti che sprite e background
	  	sono sempre disegnati senza repetizioni. Una volta disegnato un sprite o un backround questo valore
	  	viene resettato a false. Di default &egrave; false.<br>
</blockquote>

<p>
Ci sono altre due funzioni che non sono solo utili per disegnare texture. Normalmente le primitive
sono miscelate con lo sfondo usando il valore di trasparenza. Si pu&ograve; indicare come questo avviene.
Oltre alla modalit&agrave; normale &egrave; possibile indicare se il nuovo colre deve essere aggiunto a quello
esistente o sottratto al colore esistente. Questo puo essere usato per creare per esempio un riflettore o 
delle ombre. E' anche possibile prendere il colore massimo tra il nuovo colore e quello esistente.
Questo evita certi effetti di saturazione che si ottengono con la modalit&agrave; addizione.
Si noti che sia la modalit&agrave; sottrazione che la modalit&agrave; massima non prendono in considerazione il valore di
trasparenza. (DirectX non lo permette.) Cos&igrave; &egrave; meglio se l'area esterna sia nera.
Ci sono due funzioni. La prima usa le quattro opzioni descritte sopra. la seconda
funzione d&agrave; molte possibilit&agrave; in pi&ugrave;. Si dovrebbe fare qualch&egrave; esperimento con le opzioni.
Se si usano efficentemente si possono creare per esempio interessanti esplosioni o aloni.

<p>
<blockquote>
  <tt><b>draw_set_blend_mode(mode)</b></tt>
	  Indica quale modalit&agrave; di miscelatura usare. Sono disponibili i seguenti valori: <tt>bm_normal</tt>,
	  <tt>bm_add</tt>, <tt>bm_subtract</tt>, and <tt>bm_max</tt>. &Egrave; importante non dimenticare di
	  resettare la modalit&agrave; su normal perch&eacute; anche gli sprite e i background sono disegnati usando
	  le modalit&agrave; di miscelatura.<br>
  <tt><b>draw_set_blend_mode_ext(src,dest)</b></tt>
	  Indica quale modalit&agrave; di miscelatura usare sia per il colore sorgente sia per il colore di destinazione. 
	  Il nuovo colore &egrave; a volte il fattore altre volte il fattore di origine e di destinazione. 
	  Questi fattori sono settati con questa funzione. Per capire questo, Il sorgente e la destinazione
	  hanno tutti e due i componenti rosso, verde, blu e la trasparenza. Cos&igrave; la sorgente &egrave; (Rs, Gs, Bs, As)
	  e la destinazione &egrave; (Rd, Gd, Bd, Ad). Tutti sono compresi tra 0 e 1. I fattori di miscelatura che
	  si possono scegliere sono:  
	  <ul>
	  <li>bm_zero: I fattori di miscelatura sono (0, 0, 0, 0). 
	  <li>bm_one: I fattori di miscelatura sono (1, 1, 1, 1). 
	  <li>bm_src_color: I fattori di miscelatura sono (Rs, Gs, Bs, As). 
	  <li>bm_inv_src_color: I fattori di miscelatura sono (1�Rs, 1�Gs, 1�Bs, 1�As). 
	  <li>bm_src_alpha: I fattori di miscelatura sono (As, As, As, As). 
	  <li>bm_inv_src_alpha: I fattori di miscelatura sono (1�As, 1�As, 1�As, 1�As). 
	  <li>bm_dest_alpha: I fattori di miscelatura sono (Ad, Ad, Ad, Ad). 
	  <li>bm_inv_dest_alpha: I fattori di miscelatura sono (1�Ad, 1�Ad, 1�Ad, 1�Ad). 
	  <li>bm_dest_color: I fattori di miscelatura sono (Rd, Gd, Bd, Ad). 
	  <li>bm_inv_dest_color: I fattori di miscelatura sono (1�Rd, 1�Gd, 1�Bd, 1�Ad). 
	  <li>bm_src_alpha_sat: I fattori di miscelatura sono (f, f, f, 1); f = min(As, 1�Ad). 
	  </ul>
	  Per esempio, La modalit&agrave; di miscelatura normale setta i fattori di sorgente a bm_src_alpha
	  e i valori di destinazione bm_inv_src_alpha. 
	  E' importante non dimenticare di resettare la modalit&agrave; su normal perch&egrave; anch&egrave; 
	  gli sprite e i background sono disegnati usando le modalit&agrave; di miscelatura.<br>
</blockquote>


<p>
Con un po' di lavoro i primitivi texturizzati possono portare a grandi risultati.
Si possono anche creare giochi in falso 3D.


<!--END-->
</body>
</html>

<!-- KEYWORDS
advanced drawing
textures
textured polygons
drawing primitives
texture blending
gradient colors
blend mode
disegno avanzato
texture
poligoni texturizzati
disegno dei primitivi
colori a gradiente
modalit&agrave; di miscelatura

draw_point_color()
draw_line_color()
draw_line_width_color()
draw_rectangle_color()
draw_roundrect_color()
draw_triangle_color()
draw_circle_color()
draw_ellipse_color()
pr_pointlist
pr_linelist
pr_linestrip
pr_trianglelist
pr_trianglestrip
pr_trianglefan
draw_primitive_begin()
draw_vertex()
draw_vertex_color()
draw_primitive_end()
sprite_get_texture()
background_get_texture()
texture_preload()
texture_set_priority()
texture_get_width()
texture_get_height()
draw_primitive_begin_texture()
draw_vertex_texture()
draw_vertex_texture_color()
texture_set_interpolation()
texture_set_blending()
texture_set_repeat()
draw_set_blend_mode()
draw_set_blend_mode_ext()
bm_normal
bm_add
bm_max
bm_subtract
bm_zero
bm_one
bm_src_color
bm_inv_src_color
bm_src_alpha
bm_inv_src_alpha
bm_dest_alpha
bm_inv_dest_alpha
bm_dest_color
bm_inv_dest_color
bm_src_alpha_sat
--> 

